<!DOCTYPE html>
<html lang="en">
   <head>
      <title>Baobab Health Trust</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="./apps/core/assets/css/bootstrap/bootstrap.min.css">
      <link rel="stylesheet" href="./apps/core/assets/css/maindashboard/header.css">
      <link rel="stylesheet" href="./apps/core/assets/css/maindashboard/footer.css">
      <link rel="stylesheet" href="./apps/core/assets/css/custom.css">
      <script src="./apps/core/assets/js/jquery.min.js"></script>
      <script src="./apps/core/assets/js/bootstrap/bootstrap.min.js"></script>
      <script type="text/javascript"> 
      $(document).ready(function(){
            if (sessionStorage.getItem("authorization") == null) {
                    alert("not logged in");
                    window.location = "/apps/core/views/login.html";
                }
                if (sessionStorage.getItem("applicationName") === null) {

                $("#myModal").modal('show');
                }
        });
                
    </script>
   </head>
   <body>
      <div class="container-fluid">
         <div class="table-div">
            <div class="table-div-row" id="header">
               <div class="table-div-cell app-icon" style="width: 24%;">&nbsp;
                  <img src="/apps/core/assets/images/BaobabHealth.png" id="application-icon" style="">
               </div>
               <template id="barcode">
                <div class="table-div-cell app-details" style="float: left; width: 24%;" id="barCodeInner">
                    <div class="barcode" url="" functionName=""></div>
               </div>
                <script src="./apps/core/assets/js/client-scan-barcode.js"></script>
               </template>
               <div class="table-div-cell app-details" style="width: 70%; padding: 1%;" id="details">
                  <table style="width: 100%; margin: 5px;">
                     <tr>
                        <th>Facility name:</th>
                        <td id="client-name">Kamuzu Central Hospital</td>
                        <th align="right">Application Name:</th>
                        <td id="application-name">BHT Core</td>
                     </tr>
                     <tr>
                        <th>Location:</th>
                        <td id="location-name">&nbsp;</td>
                        <th align="right">App version:</th>
                        <td id="application-version">v1.0.0</td>
                     </tr>
                     <tr>
                        <th>Date:</th>
                        <td id="app-date">&nbsp;</td>
                     </tr>
                     <tr>
                        <th>User:</th>
                        <td id="client-name">&nbsp;</td>
                     </tr>
                  </table>
               </div>
            </div>
         </div>
      </div>
      <div class="container-fluid">
         <div class="row">
            <div class="col-sm-12" id="tabs-column">
               <button class="btn btn-info overview-btns" id="overview" onmousedown="showOptions(this); loadTabContent(this.id)">Overview</button>
               <button class="btn btn-info overview-btns" id="report" onmousedown="showOptions(this); loadTabContent(this.id);">Reports</button>
               <button class="btn btn-info overview-btns" id="admin" onmousedown="showOptions(this); loadTabContent(this.id);">Administration</button>
            </div>
         </div>
      </div>
      <div class="container-tab" id="generic_tabs">
      </div>
      <div class="container-tab" id="generic_tabs">
      </div>
      <!-- Modal -->
      <div class="modal fade" id="myModal" data-backdrop="static" data-keyboard="false" role="dialog">
         <div class="modal-dialog" name="div2">
            <div class="modal-content" style="margin-left:0px;">
               <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Select module</h4>
               </div>
               <!-- <button class="previous round">
               <</button>
               <button class="next round">></button> -->
               <div class="modal-body">
                  <div class="container">
                     <div class="row" id="modal-div">
                        <template id="card_template">
                           <!-- <div class="" > -->
                           <div class="app-btn" id="cardDiv" style="margin: 10px;">
                              <a href="#" class="card-block clearfix" id="moduleButton">
                                 <img alt="Avatar" style="width:70px; height: 60px; margin-top: 10%;" id="cardImage">
                                 <div class="middle">
                                    <div class="text">
                                       <p id="apptext"></p>
                                    </div>
                                 </div>
                                 <div class="card-container">
                                    <h4>
                                       <b id="appName"></b>
                                    </h4>
                                    <p id="appDescription"></p>
                                 </div>
                              </a>
                           </div>
                           <!-- </div> -->
                        </template>
                     </div>
                  </div>
               </div>
<!--                <div class="modal-footer">
                  <button class="red" data-dismiss="modal">Close</button>
               </div> -->
            </div>
         </div>
      </div>
      <!-- Modal -->
      <!-- <button class="btn btn-default" id="btn-confirm">Confirm</button> -->

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" id="mi-modal" style="width: 60%; margin-left:20%;margin-right: 20%; margin-top: 20%;">
        <div class="modal-dialog modal-sm">
            <div class="modal-content" style="margin: 0; ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h1 class="modal-title" id="myModalLabel">Are you sure you want to log out?</h1>
            </div>
            <div class="modal-footer">
                <button type="button" class="button green" id="modal-btn-si" style="float:left; text-align: center; width: 100px;">Yes</button>
                <button type="button" class="button red" id="modal-btn-no" style="width: 100px;">No</button>
            </div>
            </div>
        </div>
        </div>

        <div class="alert" role="alert" id="result"></div>
      <footer class="footer">
         <div class="container-footer">
            <button class="btn btn-danger buttons red " style="width: 200px; font-size: 2rem;" id="logout">Logout</button>
            <button class="btn btn-success buttons blue" style="margin-right: 5px;" data-toggle="modal" data-target="#myModal">
            <span>&nbsp; &nbsp; &nbsp; Modules &nbsp; &nbsp; &nbsp;<img src="public/assets/images/launcher.png"></span></button>
            <button class="green" style="margin: 5px; width: 285px; padding: 0px;" visibility: hidden; id="registerButton" onmousedown="registerPatientRedirect();" ><span>Find or Register Patient</span></button>
         </div>
         </div>
      </footer>
   </body>
   <script src="apps/core/assets/js/core.js "></script>
   <script>
    (document.getElementsByClassName("overview-btns ")[0]);
    changeModule();
    function logout() {
        if (window.confirm("Do you really want to logout?")) { 
            window.location = "/apps/core/views/login.html";
        }
    }
    var modalConfirm = function(callback){
    $("#logout").on("click", function(){
        $("#mi-modal").modal('show');
    });

    $("#modal-btn-si").on("click", function(){
        callback(true);
        $("#mi-modal").modal('hide');
    });
    
    $("#modal-btn-no").on("click", function(){
        callback(false);
        $("#mi-modal").modal('hide');
    });
    };

    modalConfirm(function(confirm){
    if(confirm){
        window.location = "/apps/core/views/login.html";
    }else{
        $("#mi-modal").modal('hide');
    }
    });
   </script>
</html>