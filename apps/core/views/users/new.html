<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />

    <script language="javascript" defer="true">
      tstUsername = "";
      tstUserKeyboardPref = "qwerty";

      var d = new Date();
      d.toDateString();

      function getInput(){
         key = $('touchscreenInput' + tstCurrentPage).getAttribute("key");
         value = $('touchscreenInput' + tstCurrentPage).value;
         localStorage.setItem(key, value);
         var d = new Date();
        //  if (document.getElementById("touchscreenInput2")) {
        //    console.log("here");
        //  }else {
        //    console.log("no here");
        //  }
           
         localStorage.setItem("date_created", d.toDateString());
        //  localStorage.setItem("user_role", "clerks");
        //  localStorage.setItem("", d.toDateString());
        
          // "admin"
      }


      function changeNextButton(){
         __$("nextButton").removeAttribute("onmousedown")
         __$("nextButton").onmousedown = function(){
            confirm_password = $('touchscreenInput' + tstCurrentPage).value;
            if (localStorage.getItem("password") === confirm_password){
              window.location.href = "show.html";
               }
               else{
                 
               }
         }
      }

    </script>

    <script type="text/javascript" src="/touchscreentoolkit/lib/javascripts/touchScreenToolkit.js" defer="true"></script>
    <script type="text/javascript" src="/apps/core/assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="/apps/core/assets/js/data.js"></script>
   <!-- <link rel="stylesheet" href="./apps/core/assets/css/custom.css"> -->
   <!-- <link rel="stylesheet" href="./apps/core/assets/css/bootstrap/bootstrap.min.css"> -->

  </head>
  <body id="">
    <div id="">
      <div id="content">
        <form action="/new_user" method="POST">
           <input helpText="First Name" allowFreeText="true" type="text" tt_onUnLoad="getInput();" name="person_name[given_name]" key="first_name" id="person_name_given_name" />

           <input helpText="Last Name" allowFreeText="true" type="text" tt_onUnLoad="getInput();" name="person_name[family_name]" key="last_name" id="person_name_family_name" />

           <select allowFreeText="false" helpText=" Role" id="userRole" name="user[role]"  tt_onLoad="$(&#39;keyboard&#39;).style.display = &#39;none&#39;" tt_onUnLoad="saveSelection();"></select>
            

           <input helpText="Username" key="username" textCase="lower" tt_onload="$(touchscreenInput5).value = ($(user_first_name).value.substring(0,3)+$(user_last_name).value.substring(0,3)).toLowerCase()" validationRule="\w{6}\w*" validationMessage="Username must have at least SIX letters" type="text" tt_onUnLoad="getInput();" name="user[username]" id="user_username" />

           <input helpText="Password" key="password" minlength="6" textCase="lower" validationRule="\w{4}\w*" validationMessage="Password less than six characters" tt_onUnLoad="getInput();" type="password" name="user[plain_password]" id="user_plain_password" />

           <input helpText="Confirm Password" tt_onload="changeNextButton();" key="confirm_password" textCase="lower" validationRule="\w{4}\w*" validationMessage="Password less than FOUR characters." type="password" name="user_confirm[password]" id="user_confirm_password" />

      </form>
        <div id="footer">
        </div>
      </div>
    </div>
  </body>
</html>

<script type="text/javascript">
  // console.log(localStorage);
  // var tt_cancel_destination = "www.google.com";
 
 function saveSelection() {
     var j = document.getElementById("touchscreenInput2");
          // undefined
          f =  j.getAttribute("tstvalue") 
          localStorage.setItem("selected_role", f);
          // console.log(f);
 } 
</script>

<script src="../../assets/js/core.js"> 
      
</script>